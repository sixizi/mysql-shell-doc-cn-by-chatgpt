## 9.6 更改主实例

使用 `ReplicaSet.setPrimaryInstance()` 操作安全地将 `ReplicaSet` 的主节点更换为另一个实例。当前的主节点被降级为次级并设置为只读，而被提升的实例成为新的主节点并设置为可读写。所有其他次级实例被更新以从新的主节点复制。 against the `ReplicaSet` 的 `MySQL Router` 实例自动开始将读写客户端重定向到新的主节点。

为了安全地更换主节点，所有 `ReplicaSet` 实例必须能被 `MySQL Shell` 访问并且拥有一致的 `GTID_EXECUTED` 集合。如果主节点不可用，并且无法恢复，强制故障转移可能是唯一的选择，参见第 9.7 节，“强制新的主节点”。

在主节点更换期间，被提升的实例会与旧主节点同步，确保所有存在于主节点的事务在拓扑更改提交之前被应用。如果这个同步步骤耗时太长或在任何次级实例上不可能完成，操作将被中止。在这种情况下，次级实例必须被修复或从 `ReplicaSet` 中移除，以使故障转移成为可能。