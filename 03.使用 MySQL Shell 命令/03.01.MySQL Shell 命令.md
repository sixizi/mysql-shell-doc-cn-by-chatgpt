## 3.1 MySQL Shell 命令

`MySQL Shell` 提供了命令，使您能够修改代码编辑器的执行环境，例如配置活动编程语言或 MySQL 服务器连接。下表列出了无论当前选择的语言是什么都可用的命令。由于命令需要独立于执行模式可用，它们以转义序列 `\` 字符开始。

| 命令          | 别名/快捷方式             | 描述                                                        |
| ------------- | ------------------------- | ----------------------------------------------------------- |
| `\help`       | `\h` 或 `\?`              | 打印关于 MySQL Shell 的帮助，或搜索在线帮助。               |
| `\quit`       | `\q` 或 `\exit`           | 退出 MySQL Shell。                                          |
| `\`           |                           | 在 SQL 模式中，开始多行模式。代码被缓存并在输入空行时执行。 |
| `\status`     | `\s`                      | 显示当前 MySQL Shell 状态。                                 |
| `\js`         |                           | 切换执行模式到 JavaScript。                                 |
| `\py`         |                           | 切换执行模式到 Python。                                     |
| `\sql`        |                           | 切换执行模式到 SQL。                                        |
| `\connect`    | `\c`                      | 连接到 MySQL 实例。                                         |
| `\reconnect`  |                           | 重新连接到同一个 MySQL 实例。                               |
| `\disconnect` |                           | 断开全局会话连接。                                          |
| `\use`        | `\u`                      | 指定要使用的模式。                                          |
| `\source`     | `\. 或 source` (无反斜杠) | 使用活动语言执行脚本文件。                                  |
| `\warnings`   | `\W`                      | 显示由语句生成的任何警告。                                  |
| `\nowarnings` | `\w`                      | 不显示由语句生成的任何警告。                                |
| `\history`    |                           | 查看和编辑命令行历史。                                      |
| `\rehash`     |                           | 手动更新自动完成名称缓存。                                  |
| `\option`     |                           | 查询和更改 MySQL Shell 配置选项。                           |
| `\show`       |                           | 使用提供的选项和参数运行指定的报告。                        |
| `\watch`      |                           | 使用提供的选项和参数运行指定的报告，并定期刷新结果。        |
| `\edit`       | `\e`                      | 在默认系统编辑器中打开一个命令，然后在 MySQL Shell 中呈现。 |
| `\pager`      | `\P`                      | 配置 MySQL Shell 用来显示文本的分页器。                     |
| `\nopager`    |                           | 禁用 MySQL Shell 配置的任何分页器。                         |
| `\system`     | `\!`                      | 运行指定的操作系统命令并在 MySQL Shell 中显示结果。         |

### 帮助命令

`\help` 命令可以带参数或不带参数使用。不带参数时会打印一条通用帮助信息，包括有关可用 MySQL Shell 命令、全局对象和主要帮助类别的信息。

带参数使用时，参数用于根据当前 MySQL Shell 运行模式搜索可用帮助。参数可以是一个词、命令、API 函数或 SQL 语句的一部分。存在以下类别：

- `AdminAPI` - 详细介绍 `dba` 全局对象和 `AdminAPI`，它使您能够使用 InnoDB Cluster、InnoDB ClusterSet 和 InnoDB ReplicaSet。
- `X DevAPI` - 详细介绍 `mysqlx` 模块以及 X DevAPI 的能力，它使您能够将 MySQL 用作文档存储。
- `Shell Commands` - 提供有关可用的内置 MySQL Shell 命令的详细信息。
- `ShellAPI` - 包含关于 `shell` 和 `util` 全局对象的信息，以及允许在 MySQL 

服务器上执行 SQL 的 `mysql` 模块。
- `SQL Syntax` - 检索 SQL 语句语法帮助的入口点。

使用通配符 `?` 匹配任何单个字符和 `*` 匹配多个字符进行搜索。命名空间 `dba` 用于 `AdminAPI`，`mysqlx` 用于 `X DevAPI`，`mysql` 用于经典 MySQL 协议的 `ShellAPI`，`shell` 用于其他 `ShellAPI` 类：`Shell`、`Sys`、`Options`，`commands` 用于 MySQL Shell 命令，`cmdline` 用于 `mysqlsh` 命令界面。

例如，要搜索有关 `X DevAPI` 的帮助，使用 `x devapi`；要搜索 MySQL Shell `\connect` 命令的帮助，使用 `\c`；要搜索 `AdminAPI` `dba.getCluster()` 操作的帮助，使用 `getCluster` 或 `dba.getCluster`。

### 连接、重新连接和断开连接命令

- `\connect` 命令用于连接到 MySQL 服务器。例如：`\connect root@localhost:3306`。如果需要密码，系统会提示您输入。
- `\reconnect` 命令在丢失服务器连接时尝试使用现有连接参数进行多次重连尝试。如果这些尝试不成功，您可以使用 `\connect` 命令并指定连接参数来进行全新连接。
- `\disconnect` 命令断开 MySQL Shell 的全局会话（由 `session` 全局对象表示）与当前连接的 MySQL 服务器实例的连接，使您可以关闭连接但仍继续使用 MySQL Shell。

### 状态命令

`\status` 命令显示有关当前全局连接的信息，包括连接到的服务器信息、正在使用的字符集、正常运行时间等。

### 源命令

`\source` 命令或其别名 `.` 可用于在 MySQL Shell 的交互模式中执行给定路径的脚本文件中的代码。例如：`\source /tmp/mydata.sql`。您可以执行 SQL、JavaScript 或 Python 代码。文件中的代码使用活动语言执行，因此要处理 SQL 代码，MySQL Shell 必须处于 SQL 模式。

### 使用命令

`\use` 命令使您能够选择哪个模式是活动的，例如：`\use schema_name`。`\use` 命令要求全局开发会话处于活动状态。`\use` 命令将当前模式设置为指定的 `schema_name` 并更新 `db` 变量为表示所选模式的对象。

### 历史命令

`\history` 命令列出了您在 MySQL Shell 中之前发出的命令。发出 `\history` 会按照发出顺序显示历史条目及其历史条目号码，可以用 `\history delete entry_number` 命令删除。

### 重建命令

当您禁用了自动完成名称缓存功能时，使用 `\rehash` 命令手动更新缓存。例如，在发出 `\use schema` 命令加载新模式后，发出 `\rehash` 来更新自动完成名称缓存。之后，自动完成将识别数据库中使用的名称，您可以自动完成文本，如表名等。

### 选项命令

`\option` 命令使您能够在所有模式中查询和更改 MySQL Shell 配置选项。您可以使用 `\option` 命令列出已设置的配置选项并显示它们的值是如何最后更改的。您还可以用它来设置和取消设置选项，无论是对会话还是持久地在 MySQL Shell 配置文件中。