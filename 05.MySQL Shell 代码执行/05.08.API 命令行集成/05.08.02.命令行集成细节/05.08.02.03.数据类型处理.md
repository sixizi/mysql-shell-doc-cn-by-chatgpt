#### 5.8.2.3 数据类型处理

[5.8.2.3.1 用户数据类型](#5.8.2.3.1 用户数据类型)

[5.8.2.3.2 数据类型解析](#5.8.2.3.2 数据类型解析)

一般来说，参数的数据类型通过以下标准解析，按优先顺序排列：

1. 目标参数的预期数据类型。
2. 基于 JSON 规范的值的数据类型。
3. 用户指定的数据类型。

最后一种情况是一个复杂的（且罕见的）情况，仅适用于命名参数。例如，假设你有一个 MySQL Shell 插件函数如下：

```python
def set_object_attributes(variables)
```

其中 `variables` 是一个没有预定义值集的字典，因此它接受任何键，并因此接受值的任何数据类型。要设置一个名为 `streetNumber` 的字符串属性，其字符串值为 `123`，请发出：

```shell
$ mysqlsh -- plugin set-object-attributes --streetNumber=123
```

因为没有预期的数据类型，根据 JSON 规范，值 `123` 被解释为数字值，但我们想将其存储为字符串，而不是数字。

注意
目前没有这样的 API 函数的情况，除非用户如上所述创建了插件。

##### 5.8.2.3.1 用户数据类型

为了避免 MySQL Shell 尝试猜测输入数据的类型所带来的问题，命令行集成支持通过指定命名参数来强制特定的数据类型，使用以下语法：

```shell
--key:type=value
```

其中 `type` 是以下之一：

- `str`
- `int`
- `uint`
- `float`
- `bool`
- `list`
- `dict`
- `json`

要将值存储为字符串，请发出：

```shell
$ mysqlsh -- plugin set-object-attributes --streetNumber:str=1234
```

> **重要**
>
> 此格式在任何命名参数中都是允许的，但仅在参数没有预期数据类型时需要。如果参数有预期的数据类型，并且你指定了不同的数据类型，则会引发错误。

##### 5.8.2.3.2 数据类型解析

当你没有指定数据类型时，MySQL Shell 试图使用以下逻辑解析数据类型。这种数据解释逻辑基于 JSON 规范，但有一些 MySQL Shell 特定的添加和限制：

字符串：

- 支持双引号和单引号字符串。
- 支持十六进制，如 `\xNN`，其中 NN 是一个十六进制数字。这用于以十六进制格式表示 ASCII 字符。
- 支持转义的垂直制表符字符。

也可以定义以下字面量：

- `undefined`：定义值为未定义（在 CLI 中不真正需要，因此不鼓励使用）。
- `true`/`false`：创建一个布尔值。
- `null`：定义一个 null 值。

任何不被 JSON 规范和上述规则覆盖的值被解释为普通字符串。