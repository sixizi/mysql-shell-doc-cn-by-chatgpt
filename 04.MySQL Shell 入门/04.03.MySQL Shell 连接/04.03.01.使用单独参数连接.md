## 4.3.1 使用单独参数连接

除了使用连接字符串指定连接参数外，还可以在启动 MySQL Shell 时使用单独的命令参数为每个值定义连接数据。有关 MySQL Shell 命令选项的完整参考，请参见附录 A.1，“mysqlsh — MySQL Shell”。

使用以下与连接相关的参数：

- `--user` (`-u`) 值
- `--host` (`-h`) 值
- `--port` (`-P`) 值
- `--schema` 或 `--database` (`-D`) 值
- `--socket` (`-S`)

命令选项的行为类似于与 mysql 客户端一起使用的选项，如在使用命令选项连接到 MySQL 服务器中所述。

使用以下命令选项来控制是否以及如何为连接提供密码：

- `--password=password` (`-ppassword`) 带有值，为连接提供密码（最多 128 个字符）。使用长格式 `--password=` 时，必须使用等号而非空格分隔选项及其值。使用短格式 `-p` 时，选项与其值之间不能有空格。如果在任一情况下使用了空格，则该值不会被解释为密码，可能会被解释为另一个连接参数。

  在命令行上指定密码应被视为不安全的。请参阅密码安全的最终用户指南。您可以使用选项文件来避免在命令行上提供密码。

- `--password` 没有值且没有等号，或 `-p` 没有值，请求密码提示。

- `--no-password`，或 `--password=` 带有空值，指定用户无密码连接。当连接到服务器时，如果用户有无密码账户（这是不安全且不推荐的），或者使用套接字对等凭证认证（用于 Unix 套接字连接），您必须使用这些方法之一来明确指定不提供密码，且不需要密码提示。

- `--password1`、`--password2` 和 `--password3`，从 MySQL Shell 8.0.28 版本开始可用，是需要多因素认证的账户的密码。您可以提供多达三个密码。这些选项的工作方式与 `--password` 选项相同，且 `--password1` 被视为与该选项等效。这些选项从 MySQL Shell 8.0.28 版本开始支持，仅适用于使用命令行参数建立的经典 MySQL 协议连接。

当以多种方式指定参数时，例如使用 `--uri` 选项和指定单独参数如 `--user`，适用以下规则：

- 如果一个参数被指定多次，使用最后一次出现的值。

- 如果同时指定了单独的连接参数和 `--uri`，则 `--uri` 的值作为基础，并且单独参数的值覆盖基础 URI 类字符串中的特定组件。

  例如覆盖 URI 类字符串中的用户：

  ```mysql
  $> mysqlsh --uri user@localhost:33065 --user otheruser
  ```

MySQL Shell 到服务器的连接可以是加密的，也可以是压缩的，如果您请求这些功能并且服务器支持它们。有关建立加密连接的指令，请参见第 4.3.4 节，“使用加密连接”。有关建立压缩连接的指令，请参见第 4.3.7 节，“使用压缩连接”。

以下示例展示了如何使用命令参数指定连接。尝试建立与指定用户在端口 33065 的 X 协议连接：

```mysql
$> mysqlsh --mysqlx -u user -h localhost -P 33065
```
尝试建立与指定用户的经典 MySQL 协议连接，请求连接压缩：

```mysql
$> mysqlsh --mysql -u user -h localhost -C
```