### 10.1.1 创建 MySQL Shell 报告

您可以使用 MySQL Shell 支持的脚本语言之一，JavaScript 或 Python，来创建和注册用户定义的报告。报告功能使用相同的 API 前端方案来处理内置报告和用户定义报告。

报告可以指定它们接受的特定于报告的选项列表，并且还可以接受指定数量的附加参数。您的报告可以支持这些输入中的两者、其中之一或都不支持。当您请求报告的帮助时，MySQL Shell 会提供选项和参数的列表，以及在注册报告时提供的这些选项和参数的任何可用描述。

#### 签名

要注册为 MySQL Shell 报告的 Python 或 JavaScript 函数的签名必须如下所示：

```python
Dict report(Session session, List argv, Dict options);
```

其中：

- `session` 是要用于执行报告的 MySQL Shell 会话对象。
- `argv` 是一个可选列表，包含传递给报告的附加参数的字符串值。
- `options` 是一个可选字典，其键名和值对应于任何特定于报告的选项及其值。

#### 报告类型

报告函数预期返回的数据格式取决于您在注册时使用的类型：

- **列表类型**
返回输出为列表的列表，第一个列表包含列名，其余部分为行的内容。MySQL Shell 默认以表格格式显示输出，或者如果在 `\show` 或 `\watch` 命令上指定了 `--vertical` 或 `--E` 选项，则以垂直格式显示。行的值转换为项的字符串表示。如果一行的元素少于列名的数量，缺失的元素被视为 NULL。如果一行的元素多于列名的数量，额外的元素将被忽略。注册此报告时，使用类型“list”。

- **报告类型**
以包含单个项目的列表形式返回自由格式的输出。MySQL Shell 使用 YAML 显示此输出。注册此报告时，使用类型“report”。

- **打印类型**
直接将输出打印到屏幕，并返回一个空列表给 MySQL Shell，以显示输出已经显示。注册此报告时，使用类型“print”。

为了提供输出，报告的 API 函数必须返回一个带有键 `report` 和一个 JSON 对象列表的字典，每个项目在您返回的列表中各有一个。对于列表类型，每个列表使用一个元素，对于报告类型使用单个元素，对于打印类型不使用元素。