### 10.1.2 注册 MySQL Shell 报告

要将您的用户定义报告注册到 MySQL Shell，可以在 JavaScript 中调用 `shell.registerReport()` 方法，或在 Python 中调用 `shell.register_report()` 方法。此方法的语法如下：

```javascript
shell.registerReport(name, type, report[, description])
```

其中：

- `name` 是一个字符串，提供报告的唯一名称。
- `type` 是一个字符串，给出报告类型，这决定了输出格式，可以是 “list”、“report” 或 “print”。
- `report` 是调用报告时要执行的函数。
- `description` 是一个字典，您可以用它来指定报告支持的选项、报告接受的额外参数，以及在 MySQL Shell 帮助系统中提供的帮助信息。

`name`、`type` 和 `report` 参数都是必需的。报告名称必须满足以下要求：

- 它在您的 MySQL Shell 安装中必须是唯一的。
- 它必须是一个有效的脚本标识符，所以第一个字符必须是字母或下划线字符，后面可以跟任意数量的字母、数字或下划线字符。
- 它可以是混合大小写的，但在转换为小写后，在您的 MySQL Shell 安装中仍然必须是唯一的。

在注册过程中以及使用 `\show` 和 `\watch` 命令运行报告时，报告名称不区分大小写。在 `shell.reports` 对象调用相应的 API 函数时，报告名称是区分大小写的。无论您处于 Python 还是 JavaScript 模式，都必须使用注册报告时使用的确切名称来调用函数。

可选字典包含以下键，它们都是可选的：

- `brief`：

  报告的简要描述。

- `details`：

  报告的详细描述，以字符串数组提供。这在您使用 `\help` 命令或 `\show` 命令的 `--help` 选项时提供。

- `options`：
  
  报告可以接受的任何特定于报告的选项。数组中的每个字典描述一个选项，并且必须包含以下键：
  
  - `name` (字符串，必需)：选项的长格式名称，必须是有效的脚本标识符。
  - `brief` (字符串，可选)：选项的简要描述。
  - `shortcut` (字符串，可选)：选项的单个字母数字字符的替代名称。
  - `details` (字符串数组，可选)：选项的详细描述。这在您使用 `\help` 命令或 `\show` 命令的 `--help` 选项时提供。
  - `type` (字符串，可选)：选项的值类型。允许的值有 “string”、“bool”、“integer” 和 “float”，如果未指定 `type`，默认为 “string”。如果指定了 “bool”，该选项充当开关：如果未指定，默认为 false；使用 `\show` 或 `\watch` 命令运行报告时，默认为 true（并不接受值）；使用 `shell.reports` 对象运行报告时，必须有一个有效值。
  - `required` (布尔值，可选)：该选项是否必需。如果未指定 `required`，则默认为 false。如果选项类型为 “bool”，则 `required` 不能为 true。
  - `values` (字符串数组，可选)：选项允许的值列表。只有类型为 “string”的选项可以有此键。如果未指定 `values`，则该选项接受任何值。
  
- `argc`：
  
  报告期望的额外参数数量的字符串，可以是以下之一：
  
  - 一个确切的参数数量，以单个数字指定。
  - 零个或多个参数，以星号指定。
  - 参数数量范围，以两个数字和一个破折号分隔指定（例如，“1-5”）。
  - 参数数量范围，有最小值但没有最大值，以数字和星号通过破折号分隔指定（例如，“1-*”）。